<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Nigerian Recipes</title>
  <link href="/css/output.css" rel="stylesheet">
  <link rel="icon" href="favicon/sl.jpg">
  <script src="https://cdn.tailwindcss.com"></script>

 <script>
        tailwind.config = {
            theme: {
                extend: {
                  icons: {
                    'icon': 'fill-gray-600 hover:fill-gray-700 w-5',
                  },
                  backgroundImage: {
                    'img': "url('../workspace/project/pictures/ape.jpg')",
                  },
                  boxShadow: {
                    'soft-shad': '0 2px 20px -10px rgba(0, 0, 0, 0.3)',
                    'top-shadow': '0 -1px 13px -10px rgba(0, 0, 0, 0.3)'
                  },
                    colors: {
                        'pry-color': 'rgb(255, 230, 0)',
                        'sec-color': 'rgb(242, 247, 248)',
                        'text-color': 'rgb(39, 39, 39)',
                    }
                }
            }
        }
    </script>

    <html>
        
    <body>

        <div id="step-cart" class="p-6 bg-white rounded shadow">
  <h2 class="text-xl font-bold mb-4">ðŸ›’ Your Cart</h2>
  <ul id="cart-items" class="space-y-2 mb-4"></ul>
  <button onclick="goToLogin()" class="bg-blue-600 text-white px-4 py-2 rounded">Continue</button>
</div>

<!-- Step 2: Login / Guest -->
<div id="step-login" class="hidden p-6 bg-white rounded shadow">
  <h2 class="text-xl font-bold mb-4">ðŸ‘¤ Login or Continue as Guest</h2>
  <input type="email" id="user-email" placeholder="Email" class="w-full border px-4 py-2 rounded mb-2" />
  <button onclick="goToDelivery()" class="bg-blue-600 text-white px-4 py-2 rounded">Next</button>
</div>

<!-- Step 3: Delivery Info -->
<div id="step-delivery" class="hidden p-6 bg-white rounded shadow">
  <h2 class="text-xl font-bold mb-4">ðŸ“¦ Delivery Info</h2>
  <input type="text" id="user-name" placeholder="Full Name" class="w-full border px-4 py-2 rounded mb-2" />
  <input type="text" id="user-address" placeholder="Delivery Address" class="w-full border px-4 py-2 rounded mb-2" />
  <input type="tel" id="user-phone" placeholder="Phone Number" class="w-full border px-4 py-2 rounded mb-4" />
  <button onclick="goToPayment()" class="bg-green-600 text-white px-4 py-2 rounded">Proceed to Pay</button>
</div>

<!-- Step 4: Payment via Paystack -->
<div id="step-payment" class="hidden p-6 bg-white rounded shadow">
  <h2 class="text-xl font-bold mb-4">ðŸ’³ Checkout</h2>
  <p class="mb-4">Total: â‚¦<span id="total-display">0</span></p>
  <button onclick="checkoutWithPaystack()" class="bg-green-600 text-white px-4 py-2 rounded">Pay with Paystack</button>
</div>

<!-- Step 5: Confirmation -->
<div id="step-confirmation" class="hidden p-6 bg-white rounded shadow text-center">
  <h2 class="text-2xl font-bold mb-4 text-green-600">âœ… Payment Successful</h2>
  <p>Your order has been placed. Reference: <span id="order-ref"></span></p>
</div>

<!-- <script src="https://js.paystack.co/v1/inline.js"></script> -->
<script>
  const steps = ['cart', 'login', 'delivery', 'payment', 'confirmation'];
  function showStep(name) {
    steps.forEach(step => {
      document.getElementById(`step-${step}`).classList.toggle('hidden', step !== name);
    });
  }

  function goToLogin() { showStep('login'); }
  function goToDelivery() { showStep('delivery'); }
  function goToPayment() {
    document.getElementById('total-display').textContent = calculateTotal().toLocaleString();
    showStep('payment');
  }

  function calculateTotal() {
    return 25000; // Replace with dynamic cart total
  }

  function checkoutWithPaystack() {
    const amount = calculateTotal() * 100;
    const email = document.getElementById('user-email').value;

    let handler = PaystackPop.setup({
      key: 'YOUR_PUBLIC_KEY_HERE',
      email: email,
      amount: amount,
      currency: 'NGN',
      ref: '' + Math.floor(Math.random() * 1000000000 + 1),
      callback: function(response) {
        document.getElementById('order-ref').textContent = response.reference;
        showStep('confirmation');
      },
      onClose: function() {
        alert('Payment not completed.');
      }
    });

    handler.openIframe();
  }

  // Start at step-cart
  showStep('cart');
</script>

</body>
</html>